<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css" media="screen" title="no title">
    <title>ThereUR</title>
  </head>
  <body>

    <!--div tag that holds the google map-->
    <div id="map-canvas"></div>

    <div id="search-bar" class="input-group" group="controls">
      <input id="search-input" data-bind="value: keyword, valueUpdate: 'afterkeydown'" type="text" class="form-control" placeholder="Search for...">
    </div>

    <!-- place searcs result -->
    <div id="results" group="controls">

      <div class="title">
        <img height="30px" style="margin: 15px" src="images/info.jpg" alt="info">
        <h2>Nearby places</h2>
      </div>

      <ul class="infolist" data-bind="foreach: displayedPlaces()">
        <li data-bind="click: $root.clickMarker">
          <div class="row">
            <div class="col-md-8">

            <p>
              <div class="longtext">
                <h3 class="longtext" data-bind="text: $data.name"></h3>
              </div>
            </p>

            <p class="place-category"><span data-bind="text: $root.formattedType($data)"></span></p>

            <p class="place-address"><span data-bind="text: $root.address($data)"></span></p>

            <p>
              <div data-bind="if: $data.rating">

                <div>
                  <span class="rating-number" data-bind="text: $data.rating"></span>

                  <div style="display: inline;" data-bind="foreach: $root.rateImg($data)">
                    <img class="rate-star" data-bind="attr:{src: star}" alt="*">
                  </div>

                </div>

              </div>
              <span data-bind="ifnot: $data.rating">
                <em>no rating available.</em>
              </span>
            </p>

            </div>
            <div class="col-md-4">

            <p>
              <span data-bind="if: $data.photos">
                <img data-bind="attr:{src: photos[0].getUrl({maxHeight: 80})}" alt="photo">
              </span>
              <span data-bind="ifnot: $data.photos">
                <img style="height: 80" src="images/nophoto.jpg" alt="photo">
              </span>
            </p>

            </div>
          </div>
        </li>
      </ul>
    </div><!-- end of place searcs result -->

    <div id="btn-toolbar" group="controls">
      <button id="reset" type="core" class="btn btn-default" style="display: block">
        <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>
      </button>
      <div id="filters" class="btn-group" data-bind="foreach: icons" role="group" aria-label="plane">
        <!--placeholder for filter buttons-->
        <button type="button" class="btn btn-default">
          <img width="23px" data-bind="attr: {src: icon}" alt="icon">
        </button><br>
      </div>
      <button id="hide" type="core" class="btn btn-default" style="display: block">
        <span class="glyphicon glyphicon-triangle-left" aria-hidden="true"></span>
      </button>
    </div>

    <div id="photoViewer" style="display: none;">
      <img id="close-photo" class="navButton" src="images/close_button.png" alt="X">
      <img id="prev" class="navButton" src="images/prev_button.png" alt="<">
      <img id="next" class="navButton" src="images/next_button.png" alt=">">
      <div id="frame" data-bind="foreach: placePhotos">
        <img class="photo" style="margin: 0 1 0 1px;" data-bind="attr:{id: $index, src: $data.getUrl({maxHeight: 600})}" alt="photo">
      </div>
      <span id="photoCounter" class="navButton"></span>
    </div>

    <!--review page -->
    <div id="review-page" style="display: none;">

      <img id="close-review" class="navButton" src="images/close_button.png" alt="X">
      <div id="review-container">

        <div id="review-title" data-bind="with: placeInFocus">

          <p>
            <div class="longtext">
              <h1 data-bind="text: $data.name"></h1>
            </div>
          </p>

          <p class="greytext"><span data-bind="text: $data.formatted_address"></span></p>

          <p>

            <div>
              <span></span>
              <span class="rating-number" style="font-size: 25px;" data-bind="text: $data.rating"></span>

              <div style="display: inline;" data-bind="foreach: $root.rateImg($data)">
                <img style="height: 25px;" class="rate-star" data-bind="attr:{src: star}" alt="*">
              </div>
            </div>

        </div>

        <div id="reviews" data-bind="foreach: placeReviews">
          <strong style="display: inline" data-bind="text: $data.author_name"></strong>
          <div style="display: inline">
            <span class="rating-number" data-bind="text: $data.rating"></span>

            <div style="display: inline;" data-bind="foreach: $root.rateImg($data)">
              <img class="rate-star" data-bind="attr:{src: star}" alt="*">
            </div>

          </div>

          <p  style="margin-bottom: 20px;">
            <span class="review" data-bind="text: $data.text"></span>
          </p>

        </div>

      </div>
    </div> <!--end review page -->
    <!-- load scripts -->
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&libraries=places" async defer></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script type="text/javascript" src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js"></script>
    <script type="text/javascript" src="http://knockoutjs.com/downloads/knockout-3.3.0.js"></script>
    <script type="text/javascript" src="js/googlePlaceTypes.js"></script>
    <script type="text/javascript" src="js/app.js"></script>

  </body>
</html>
